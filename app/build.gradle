// ğŸ”Œ Gradle í”ŒëŸ¬ê·¸ì¸ ì„¤ì •
plugins {
    // Android ì• í”Œë¦¬ì¼€ì´ì…˜ í”ŒëŸ¬ê·¸ì¸
    alias(libs.plugins.android.application)

    // Kotlin Android í”ŒëŸ¬ê·¸ì¸
    alias(libs.plugins.kotlin.android)

    // Kotlin Compose í”ŒëŸ¬ê·¸ì¸ (Compose ì‚¬ìš© ì‹œ í•„ìš”)
    alias(libs.plugins.kotlin.compose)
}

android {
    // ğŸ“¦ ì•±ì˜ íŒ¨í‚¤ì§€ ë„¤ì„ìŠ¤í˜ì´ìŠ¤
    namespace 'com.final_pj.voice'

    // ğŸ§± ì»´íŒŒì¼ SDK ë²„ì „ (ë¹Œë“œ ì‹œ ê¸°ì¤€ Android API)
    compileSdk {
        version = release(35)
    }

    defaultConfig {
        // ğŸ“± ì‹¤ì œ ì•± ID (Play Store ê¸°ì¤€)
        applicationId "com.final_pj.voice"

        // â¬‡ ìµœì†Œ ì§€ì› Android ë²„ì „ (Android 13)
        minSdk 33

        // ğŸ¯ íƒ€ê²Ÿ SDK (Android 15/16 ëŒ€ì‘)
        targetSdk 36

        // ğŸ”¢ ë‚´ë¶€ ë²„ì „ ì½”ë“œ (ì—…ë°ì´íŠ¸ ì‹œ ì¦ê°€)
        versionCode 1

        // ğŸ· ì‚¬ìš©ìì—ê²Œ ë³´ì´ëŠ” ë²„ì „ ì´ë¦„
        versionName "1.0"

        // ğŸ§ª í…ŒìŠ¤íŠ¸ ëŸ¬ë„ˆ ì„¤ì •
        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
    }

    // ğŸ— ë¹Œë“œ íƒ€ì… ì„¤ì •
    buildTypes {
        release {
            // ğŸ” ì½”ë“œ ë‚œë…í™” ë¹„í™œì„±
            minifyEnabled false

            // ğŸ“œ Proguard ì„¤ì • íŒŒì¼
            proguardFiles getDefaultProguardFile(
                    'proguard-android-optimize.txt'
            ), 'proguard-rules.pro'
        }
    }

    // â˜• Java ì»´íŒŒì¼ ì˜µì…˜
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_11
        targetCompatibility JavaVersion.VERSION_11
    }

    // ğŸŸ£ Kotlin JVM íƒ€ê²Ÿ
    kotlinOptions {
        jvmTarget = '11'
    }

    // ğŸ§© ë¹Œë“œ ê¸°ëŠ¥ í™œì„±í™”
    buildFeatures {
        // Jetpack Compose (í˜„ì¬ ë¹„í™œì„±)
        // compose true

        // XML ViewBinding í™œì„±í™”
        viewBinding true
    }

    // ğŸ“¦ AAPT ì˜µì…˜ (ì••ì¶• ì œì™¸ íŒŒì¼)
    aaptOptions {
        // TensorFlow Lite ëª¨ë¸ ì••ì¶• ë°©ì§€
        noCompress "tflite"
    }

    // ğŸ“¦ íŒ¨í‚¤ì§• ì„¤ì •
    packaging {
        jniLibs {
            // êµ¬í˜• JNI íŒ¨í‚¤ì§• ë°©ì‹ ì‚¬ìš© (ML ë¼ì´ë¸ŒëŸ¬ë¦¬ í˜¸í™˜)
            useLegacyPackaging = true
        }
    }

    // ğŸ”§ PyTorch / FFmpeg ê´€ë ¨ ì¶©ëŒ í•´ê²°
    packagingOptions {
        // C++ ê³µìœ  ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¤‘ë³µ ì‹œ ì²« ë²ˆì§¸ ì‚¬ìš©
        pickFirst 'lib/x86/libc++_shared.so'
        pickFirst 'lib/x86_64/libc++_shared.so'
        pickFirst 'lib/armeabi-v7a/libc++_shared.so'
        pickFirst 'lib/arm64-v8a/libc++_shared.so'
    }

    // ğŸ§ FFmpegKit íŒ¨í‚¤ì§€ íƒ€ì… (audio ì „ìš©)
    rootProject.ext.ffmpegKitPackage = "audio"
}

dependencies {

    // ğŸ”¹ Android ê¸°ë³¸ KTX í™•ì¥
    implementation libs.androidx.core.ktx

    // ğŸ”¹ Lifecycle (ëŸ°íƒ€ì„)
    implementation libs.androidx.lifecycle.runtime.ktx

    // ğŸ”¹ Compose Activity ì§€ì›
    implementation libs.androidx.activity.compose

    // ğŸ”¹ Compose BOM (ë²„ì „ í†µí•© ê´€ë¦¬)
    implementation platform(libs.androidx.compose.bom)

    // ğŸ”¹ Compose UI í•µì‹¬
    implementation libs.androidx.compose.ui
    implementation libs.androidx.compose.ui.graphics
    implementation libs.androidx.compose.ui.tooling.preview

    // ğŸ”¹ Compose Material3
    implementation libs.androidx.compose.material3

    // ğŸ”¹ AppCompat (í•˜ìœ„ í˜¸í™˜)
    implementation libs.androidx.appcompat

    // ğŸ”¹ í”„ë¡œì„¸ìŠ¤ ë¼ì´í”„ì‚¬ì´í´ ê´€ë¦¬
    implementation libs.androidx.lifecycle.process

    // ğŸ”¹ RecyclerView
    implementation libs.androidx.recyclerview

    // ğŸ”¹ Material Design
    implementation libs.material

    // ğŸ”¹ ConstraintLayout (MotionLayout í¬í•¨)
    implementation libs.androidx.constraintlayout

    // ğŸ”¹ LiveData
    implementation libs.androidx.lifecycle.livedata.ktx

    // ğŸ”¹ ViewModel
    implementation libs.androidx.lifecycle.viewmodel.ktx

    // ğŸ”¹ Fragment KTX
    implementation libs.androidx.fragment.ktx

    // ğŸ”¹ Media3 (ë¯¸ë””ì–´ ê³µí†µ ìœ í‹¸)
    implementation libs.androidx.media3.common.ktx

    // ğŸ”Š ì˜¤ë””ì˜¤ DSP ë¼ì´ë¸ŒëŸ¬ë¦¬ (JAR ì§ì ‘ í¬í•¨)
    implementation files('libs/TarsosDSP-Android-latest.jar')

    // ğŸ§ª ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
    testImplementation libs.junit

    // ğŸ§ª Android í…ŒìŠ¤íŠ¸
    androidTestImplementation libs.androidx.junit
    androidTestImplementation libs.androidx.espresso.core

    // ğŸ§ª Compose í…ŒìŠ¤íŠ¸
    androidTestImplementation platform(libs.androidx.compose.bom)
    androidTestImplementation libs.androidx.compose.ui.test.junit4

    // ğŸ›  Compose ë””ë²„ê·¸ íˆ´
    debugImplementation libs.androidx.compose.ui.tooling
    debugImplementation libs.androidx.compose.ui.test.manifest

    // ğŸ™ ìŒì„± ì¸ì‹ (VOSK)
    implementation 'com.alphacephei:vosk-android:0.3.75'

    // ğŸ¨ Material Components
    implementation "com.google.android.material:material:1.11.0"

    // ğŸ§± ConstraintLayout ìµœì‹  ë²„ì „ (MotionLayout í•„ìˆ˜)
    implementation "androidx.constraintlayout:constraintlayout:2.1.4"

    // ğŸ§­ Jetpack Navigation
    implementation("androidx.navigation:navigation-fragment-ktx:2.5.3")
    implementation("androidx.navigation:navigation-ui-ktx:2.5.3")

    // ğŸŒ ë„¤íŠ¸ì›Œí¬ í†µì‹  (OkHttp)
    implementation("com.squareup.okhttp3:okhttp:4.11.0")

    // ğŸ”„ ì½”ë£¨í‹´ (ë°±ê·¸ë¼ìš´ë“œ ì²˜ë¦¬)
    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.7.3'
    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.7.3'

    // ğŸ§  TensorFlow Lite
    implementation 'org.tensorflow:tensorflow-lite:2.14.0'
    implementation 'org.tensorflow:tensorflow-lite-select-tf-ops:+'

    // ğŸ”¥ PyTorch Lite (ëª¨ë°”ì¼ ì¶”ë¡ )
    implementation 'org.pytorch:pytorch_android_lite:1.13.1'
    implementation 'org.pytorch:pytorch_android_torchvision_lite:1.13.1'
}
